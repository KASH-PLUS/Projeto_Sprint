<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Adicionar Caixa</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/styles.min.css">
</head>

<body id="page-top" onload="selecionarMaquinas(), listarCaixas()">
    <span id="mensagem_erro" class="ms"></span>
    <div id="wrapper">
        <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0"
            style="background: rgb(0, 132, 156);">
            <div class="container-fluid d-flex flex-column p-0"><a
                    class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="#">
                    <div class="sidebar-brand-icon"><img src="assets/img/logo/logoWhite.png" width="60%"
                            style="margin-top: 10%;"></div>
                </a>
                <hr class="sidebar-divider my-0">
                <ul id="accordionSidebar" class="navbar-nav text-light">
                    <li class="nav-item"><a class="nav-link" href="listarUser.html" id="link_list_user"><i
                                class="fas fa-user"></i><span>Lista de usuários</span></a><a class="nav-link"
                            href="addUser.html" id="link_add_user"><i class="fas fa-user-plus"></i><span>Adicionar
                                Usuário</span></a><a class="nav-link" href="addCaixa.html" id="link_add_caixa"><i
                                class="fas fa-server"></i><span>Cadastrar Caixa</span></a><a class="nav-link"
                            href="dashMapa.html" id="link_dash_mapa"><i class="fas fa-map"></i><span>Dash -
                                Região</span></a><a class="nav-link" href="dashOciosidade.html" id="link_dash_mapa"><i
                                class="fas fa-map"></i><span>Dash -
                                Ociosidade</span></a></li>
                    <li class="nav-item"><a id="link_dash" class="nav-link" data-bs-toggle="collapse" href="#div_caixas"
                            role="button" aria-expanded="false" aria-controls="div_caixas"><i
                                class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
                        <div class="collapse show" id="div_caixas">
                        </div>
                    </li>
                </ul>
                <div class="text-center d-none d-md-inline"><button class="btn rounded-circle border-0"
                        id="sidebarToggle" type="button"></button></div>
            </div>
        </nav>
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
                    <div class="container-fluid">
                        <h5 style="color: var(--bs-navbar-brand-color);" id="titulo_cargo">Administrador</h5>
                        <ul class="navbar-nav flex-nowrap ms-auto">
                            <li class="nav-item dropdown no-arrow mx-1"></li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="shadow dropdown-list dropdown-menu dropdown-menu-end"
                                    aria-labelledby="alertsDropdown"></div>
                            </li>
                            <div class="d-none d-sm-block topbar-divider"></div>
                            <li class="nav-item dropdown no-arrow">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link"
                                        aria-expanded="false" data-bs-toggle="dropdown" href="#"><span
                                            class="d-none d-lg-inline me-2 text-gray-600 small" id="span_user">Kash
                                            User</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                                            viewBox="0 0 24 24" fill="none" style="font-size: 33px;">
                                            <path
                                                d="M5.12104 17.8037C7.15267 16.6554 9.4998 16 12 16C14.5002 16 16.8473 16.6554 18.879 17.8037M15 10C15 11.6569 13.6569 13 12 13C10.3431 13 9 11.6569 9 10C9 8.34315 10.3431 7 12 7C13.6569 7 15 8.34315 15 10ZM21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round"></path>
                                        </svg></a>
                                    <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in"><a
                                            class="dropdown-item" href="#"><i
                                                class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Sair</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
                <div class="container-fluid">
                    <h3 class="text-dark mb-4">Dash Ociosidade</h3>
                    <div class="row mb-3">
                        <div class="col-auto col-lg-8 col-xl-12">
                            <div class="row">
                                <div class="col-lg-12 col-xl-12 offset-lg-3 offset-xl-0">
                                    <div class="card shadow mb-3">
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 fw-bold">Lista de Caixas</p>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <div id="div_primeiro_componente">
                                                        <select class="form-select" id="slct_componente">
                                                            
                                                        </select>
                                                    </div>

                                                    <div class="text-center mb-3"><button class="btn btn-primary btn-sm"
                                                            onclick="recuperarDados()" id="btn_cadastro"
                                                            style="margin-top: 2%;">Cadastrar
                                                            Máquina</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                        <div class="row">
                            <div class="col-md-6 col-xl-3 mb-4">
                                <div id="cpu_cor" class="card shadow border-start-primary py-2">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-primary fw-bold text-l mb-1">
                                                    <span>CPU</span>
                                                </div>
                                                <div class="text-dark fw-bold h5 mb-0"><span id="span_usoCpu"></span></div>
                                            </div>
                                            <div class="col-auto">
                                                <svg class="bi bi-cpu-fill fa-2x text-black-300"
                                                    xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                                                    fill="currentColor" viewBox="0 0 16 16">
                                                    <path
                                                        d="M6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z">
                                                    </path>
                                                    <path
                                                        d="M5.5.5a.5.5 0 0 0-1 0V2A2.5 2.5 0 0 0 2 4.5H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2A2.5 2.5 0 0 0 4.5 14v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14a2.5 2.5 0 0 0 2.5-2.5h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14A2.5 2.5 0 0 0 11.5 2V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5zm1 4.5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3A1.5 1.5 0 0 1 6.5 5z">
                                                    </path>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3 mb-4">
                                <div id="ram_cor" class="card shadow border-start-success py-2">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-success fw-bold text-l mb-1">
                                                    <span>RAM</span>
                                                </div>
                                                <div class="text-dark fw-bold h5 mb-0"><span id="span_usoRam"></span> /
                                                    <span id="span_ramMaxima"></span>
                                                </div>
                                            </div>
                                            <div class="col-auto"><i class="fas fa-memory fa-2x text-black-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3 mb-4">
                                <div id="disco_cor" class="card shadow border-start-info py-2">
                                    <div class="card-body">
                                        <div class="row align-items-center no-gutters">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-info fw-bold text-l mb-1"><span>Disco</span>
                                                </div>
                                                <div class="row g-0 align-items-center">
                                                    <div class="col-auto">
                                                        <div class="text-dark fw-bold h5 mb-0 me-3"><span
                                                                id="span_usoDisco"></span></div>
                                                    </div>
                                                    <div class="col">
                                                        <div class="progress progress-sm">
                                                            <div class="progress-bar bg-info" id="barra_usoDisco"
                                                                aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                                style="width: 50%;">
                                                            </div>
                                                            <div></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-auto"><svg class="fa-2x text-black-300"
                                                    xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512" width="1em"
                                                    height="1em" fill="currentColor">
                                                    <path
                                                        d="M433.1 129.1l-83.9-83.9C342.3 38.32 327.1 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 152.9 441.7 137.7 433.1 129.1zM224 416c-35.34 0-64-28.66-64-64s28.66-64 64-64s64 28.66 64 64S259.3 416 224 416zM320 208C320 216.8 312.8 224 304 224h-224C71.16 224 64 216.8 64 208v-96C64 103.2 71.16 96 80 96h224C312.8 96 320 103.2 320 112V208z">
                                                    </path>
                                                </svg></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                    <footer class="bg-white sticky-footer">
                        <div class="container my-auto">
                            <div class="text-center my-auto copyright"><span>Copyright © KASH+&nbsp;2022</span></div>
                        </div>
                    </footer>
                </div>
            </div>
            <script src="assets/bootstrap/js/bootstrap.min.js"></script>
            <script src="assets/js/script.min.js"></script>
            <script src="../js/funcoes.js"></script>
            <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>
<script>

    function selecionarMaquinas() {
        
        var cnpjVar = sessionStorage.BANCO_ID;

        fetch("/usuarios/selecionarMaquinas", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                cnpjServer: cnpjVar
            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO listar()!")

            if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));

                    serialNumber = json[0].serialNumber;
                    nome = json[0].nome;

                    const select = document.querySelector('#slct_componente');

                    for(let i = 0; i < json.length; i++){
                        select.options[select.options.length] = new Option(json[i].nome, json[i].serialNumber);
                    }
                    

                    
                    
                });



            } else {

                console.log("Houve um erro ao tentar realizar o login!");

                resposta.text().then(texto => {
                    mensagem_erro.classList.add("erro")
                    mensagem_erro.style.display = "flex";
                    mensagem_erro.innerHTML = texto;
                    setTimeout(() => {
                        mensagem_erro.style.display = "none";
                        mensagem_erro.classList.remove("alerta");
                        mensagem_erro.innerHTML = "";
                    }, "5000")
                });
            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;

    }

</script>